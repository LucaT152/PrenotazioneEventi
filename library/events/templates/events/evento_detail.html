{% extends "base_generic.html" %}

{% block content %}
<h1 class="title">{{ object.titolo }}</h1>

{% if object.immagine %}
  <img src="{{ object.immagine.url }}"
       alt="{{ object.titolo }}"
       class="event-img"
       style="margin: 0 auto 30px; display: block;">
{% endif %}

<p class="event-description">{{ object.descrizione }}</p>

<p><strong>Data:</strong> {{ object.data|date:"d/m/Y H:i" }}</p>
<p><strong>Posti totali:</strong> {{ object.posti_totali }}</p>
<p><strong>Posti rimanenti:</strong> {{ object.posti_disponibili }}</p>

{% if user.is_authenticated %}

  {% if gia_prenotato %}
    <span class="banner banner-success">
      Hai gi√† prenotato questo evento
    </span>

  {% else %}
    {% if object.is_prenotabile %}
      <a href="{% url 'prenota-evento' object.id %}" class="btn btn-primary">
        Prenota evento
      </a>

      {% if object.ultimi_posti %}
        <span class="banner banner-warning">
          Ultimi posti rimanenti
        </span>
      {% endif %}

    {% else %}
      <span class="banner banner-danger">
        Posti terminati
      </span>
    {% endif %}
  {% endif %}

{% else %}
  <p>
    <a href="{% url 'login' %}?next={{ request.path }}">
      Accedi per prenotare
    </a>
  </p>
{% endif %}

{% endblock %}
