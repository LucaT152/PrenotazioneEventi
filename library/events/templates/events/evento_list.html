{% extends "base_generic.html" %}

{% block content %}
<h1 class="title">Eventi disponibili</h1>

<!-- FILTRI DATA -->
<form method="get" style="margin-bottom: 25px; text-align: center;">
  <label>
    Da:
    <input type="date" name="from" value="{{ request.GET.from }}">
  </label>

  <label style="margin-left: 10px;">
    A:
    <input type="date" name="to" value="{{ request.GET.to }}">
  </label>

  <button type="submit" class="btn btn-primary" style="margin-left: 10px;">
    Filtra
  </button>

  {% if request.GET.from or request.GET.to %}
    <a href="{% url 'evento-list' %}" class="btn btn-warning" style="margin-left: 10px;">
      Reset
    </a>
  {% endif %}
</form>

<div class="event-list">

  {% for evento in eventi %}
  <div class="event-card">

    <!-- BLOCCO SINISTRO -->
    <div class="event-main">

      <div class="event-header">
        <h2 class="event-title">{{ evento.titolo }}</h2>
      </div>

      <p class="event-date">
        ðŸ“… {{ evento.data|date:"d/m/Y H:i" }}
      </p>

      <p class="event-description">
        {{ evento.descrizione|truncatewords:20 }}
      </p>

    </div>

    <!-- BLOCCO DESTRO -->
    <div class="event-action">
      <a href="{{ evento.get_absolute_url }}" class="btn btn-primary">
        Dettagli
      </a>
    </div>

  </div>
  {% empty %}
    <p class="text-muted" style="text-align:center;">
      Nessun evento disponibile per il periodo selezionato.
    </p>
  {% endfor %}

</div>
{% endblock %}
